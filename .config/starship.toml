# ~/.config/starship.toml
# Ported from your Powerlevel10k (~/.p10k.zsh) layout.
# Goal: same overall structure (2 lines, left dir+git, right “info bar”, CPU temp),
# not a 1:1 replica (Starship can't fully match every P10k feature).

add_newline = true
scan_timeout = 30
command_timeout = 500

# Line 1: dir + git on the left, selected info on the right (via $fill)
# Line 2: prompt char
format = "$directory$git_branch$git_status$fill$status$cmd_duration$jobs${custom.cpu_temp}$line_break$character"

[fill]
symbol = " "

[character]
format = "$symbol "
success_symbol = "[>](bold fg:76)"
error_symbol = "[>](bold fg:196)"
vimcmd_symbol = "[<](bold fg:76)"
vimcmd_visual_symbol = "[V](bold fg:226)"
vimcmd_replace_symbol = "[^](bold fg:76)"
vimcmd_replace_one_symbol = "[^](bold fg:76)"

[directory]
# P10k does smart, unique truncation; Starship can't replicate that exactly.
# This keeps the path readable and avoids eating the whole line.
truncation_length = 8
truncate_to_repo = false
format = "[ $path ]($style)"
style = "fg:254 bg:4"

[git_branch]
symbol = ""
truncation_length = 32
truncation_symbol = ".."
format = "[ $branch ]($style)"
style = "fg:0 bg:2"

[git_status]
# Keep the p10k-ish ASCII vibe.
# We prefix with "|" so branch + status looks like a single segment when both show.
format = "[|$all_status$ahead_behind ]($style)"
style = "fg:0 bg:2"

stashed = " *"
ahead = " >"
behind = " <"
diverged = " <>"
up_to_date = ""

conflicted = " ~"
deleted = " x"
renamed = " »"
modified = " !"
staged = " +"
untracked = " ?"

[status]
disabled = false
# Only show on non-zero exit status (success_symbol is empty).
format = "[ $symbol$status ]($style)"
symbol = "err "
success_symbol = ""
style = "fg:15 bg:1"

[cmd_duration]
min_time = 3000
show_milliseconds = false
format = "[ $duration ]($style)"
style = "fg:0 bg:3"

[jobs]
# Show only an indicator (no count), similar to your P10k setup.
format = "[ $symbol ]($style)"
symbol = "bg"
style = "fg:0 bg:6"

[direnv]
disabled = false
format = "[ direnv ]($style)"
style = "fg:0 bg:5"

[python]
symbol = ""
pyenv_prefix = ""
version_format = "${raw}"
format = "[ py (${version} )( \\($virtualenv\\) )]($style)"
style = "fg:254 bg:4"

[nodejs]
symbol = ""
version_format = "${raw}"
format = "[ node (${version} )]($style)"
style = "fg:0 bg:2"

[rust]
symbol = ""
version_format = "${raw}"
format = "[ rs (${version} )]($style)"
style = "fg:254 bg:1"

[golang]
symbol = ""
version_format = "${raw}"
format = "[ go (${version} )]($style)"
style = "fg:0 bg:6"

[terraform]
format = "[ tf ($workspace) ]($style)"
style = "fg:254 bg:5"

[aws]
symbol = ""
format = "[ aws ($profile)(@$region) ]($style)"
style = "fg:0 bg:214"

[gcloud]
symbol = ""
format = "[ gcp ($account@$project) ]($style)"
style = "fg:254 bg:33"

[kubernetes]
disabled = false
symbol = ""
format = "[ k8s $context(\\($namespace\\)) ]($style)"
style = "fg:254 bg:27"

[username]
disabled = false
show_always = false
format = "[ $user@]($style)"
style_user = "fg:254 bg:8"
style_root = "fg:254 bg:1"

[hostname]
disabled = false
ssh_only = true
trim_at = "."
format = "[$hostname ]($style)"
style = "fg:254 bg:8"

[custom.cpu_temp]
description = "CPU temperature (osx-cpu-temp)"
when = "command -v osx-cpu-temp >/dev/null 2>&1"
command = "osx-cpu-temp -F 2>/dev/null | head -n1 | sed 's/F$/ F/'"
format = "[ $output ]($style)"
style = "fg:7 bg:4"
